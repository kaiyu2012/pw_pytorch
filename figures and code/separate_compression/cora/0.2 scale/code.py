from matplotlib import pyplot as plt
import numpy as np
def calculate(array_list):
    min_list = []
    max_list = []
    avg_list = []
    # 1000
    for i in range(len(array_list[0])):

        # 5
        list = []
        for j in range(len(array_list)):
            list.append(array_list[j][i])

        minimum = min(list)
        maximum = max(list)
        average = sum(list) / len(list)

        min_list.append(minimum)
        max_list.append(maximum)
        avg_list.append(average)
    return avg_list, min_list, max_list

ratios = [0.2, 0.4, 0.6, 0.8, 1.0]
top_k_singleshot = {'number_of_runs': 3, 'adj_compressions': [0.2, 0.4, 0.6, 0.8, 1.0], 'weight_compressions': [0.2, 0.4, 0.6, 0.8, 1.0], 'run_0': {'top_k_gradient_score': [[[0.744, 0.746, 0.742, 0.734, 0.73], [0.694, 0.7, 0.68, 0.682, 0.66], [0.674, 0.666, 0.676, 0.67, 0.662], [0.636, 0.644, 0.616, 0.612, 0.6], [0.6, 0.614, 0.592, 0.594, 0.586]]]}, 'run_1': {'top_k_gradient_score': [[[0.728, 0.706, 0.692, 0.682, 0.682], [0.686, 0.69, 0.674, 0.656, 0.652], [0.706, 0.716, 0.704, 0.698, 0.688], [0.676, 0.686, 0.666, 0.66, 0.646], [0.67, 0.664, 0.658, 0.652, 0.632]]]}, 'run_2': {'top_k_gradient_score': [[[0.694, 0.702, 0.696, 0.69, 0.668], [0.664, 0.668, 0.676, 0.674, 0.648], [0.698, 0.696, 0.696, 0.688, 0.684], [0.652, 0.65, 0.672, 0.65, 0.664], [0.576, 0.576, 0.562, 0.57, 0.576]]]}}
top_k_multishot = {'number_of_runs': 3, 'run_0': {'top_k_gradient_score': [{'level_1': [0.744, 0.746, 0.726, 0.72, 0.716, 0.7020000000000001, 0.704, 0.7020000000000001, 0.7000000000000001, 0.704, 0.678, 0.686, 0.666, 0.672, 0.684, 0.6900000000000001, 0.6880000000000001, 0.672, 0.662, 0.668, 0.654, 0.628, 0.656, 0.658, 0.648], 'level_2': [0.738, 0.75, 0.732, 0.736, 0.736, 0.706, 0.712, 0.7000000000000001, 0.704, 0.708, 0.672, 0.676, 0.7000000000000001, 0.6980000000000001, 0.6900000000000001, 0.67, 0.674, 0.674, 0.668, 0.66, 0.662, 0.682, 0.66, 0.664, 0.674], 'level_3': [0.744, 0.75, 0.74, 0.732, 0.73, 0.71, 0.706, 0.718, 0.704, 0.708, 0.684, 0.6940000000000001, 0.7020000000000001, 0.6940000000000001, 0.6980000000000001, 0.686, 0.672, 0.676, 0.67, 0.674, 0.658, 0.66, 0.65, 0.67, 0.654]}]}, 'run_1': {'top_k_gradient_score': [{'level_1': [0.75, 0.636, 0.654, 0.666, 0.656, 0.66, 0.646, 0.658, 0.66, 0.662, 0.642, 0.658, 0.716, 0.724, 0.706, 0.6920000000000001, 0.6920000000000001, 0.6940000000000001, 0.7000000000000001, 0.706, 0.684, 0.6880000000000001, 0.6940000000000001, 0.6920000000000001, 0.6920000000000001], 'level_2': [0.608, 0.62, 0.64, 0.622, 0.648, 0.606, 0.612, 0.632, 0.618, 0.662, 0.608, 0.618, 0.71, 0.718, 0.72, 0.704, 0.708, 0.6960000000000001, 0.714, 0.7000000000000001, 0.6940000000000001, 0.6900000000000001, 0.676, 0.6940000000000001, 0.6880000000000001], 'level_3': [0.604, 0.592, 0.628, 0.616, 0.634, 0.594, 0.612, 0.63, 0.634, 0.638, 0.592, 0.708, 0.712, 0.726, 0.714, 0.6900000000000001, 0.6980000000000001, 0.68, 0.708, 0.6940000000000001, 0.7000000000000001, 0.682, 0.6880000000000001, 0.6940000000000001, 0.686]}]}, 'run_2': {'top_k_gradient_score': [{'level_1': [0.732, 0.736, 0.736, 0.724, 0.732, 0.684, 0.682, 0.6880000000000001, 0.6900000000000001, 0.6920000000000001, 0.676, 0.68, 0.676, 0.662, 0.672, 0.682, 0.67, 0.666, 0.678, 0.66, 0.664, 0.67, 0.662, 0.672, 0.672], 'level_2': [0.758, 0.74, 0.74, 0.734, 0.73, 0.684, 0.6920000000000001, 0.6880000000000001, 0.6920000000000001, 0.704, 0.682, 0.68, 0.684, 0.676, 0.6920000000000001, 0.67, 0.668, 0.672, 0.664, 0.668, 0.67, 0.666, 0.662, 0.666, 0.666], 'level_3': [0.75, 0.734, 0.734, 0.744, 0.736, 0.6920000000000001, 0.6920000000000001, 0.686, 0.6920000000000001, 0.6900000000000001, 0.678, 0.678, 0.668, 0.68, 0.68, 0.662, 0.664, 0.656, 0.672, 0.678, 0.662, 0.662, 0.68, 0.668, 0.67]}]}}
synflow_singleshot = {'number_of_runs': 3, 'adj_compressions': [0.2, 0.4, 0.6, 0.8, 1.0], 'weight_compressions': [0.2, 0.4, 0.6, 0.8, 1.0], 'run_0': {'synflow': [[[0.724, 0.718, 0.702, 0.694, 0.68], [0.698, 0.692, 0.64, 0.664, 0.648], [0.684, 0.672, 0.65, 0.652, 0.63], [0.678, 0.678, 0.642, 0.63, 0.598], [0.666, 0.654, 0.634, 0.61, 0.602]]]}, 'run_1': {'synflow': [[[0.682, 0.682, 0.668, 0.672, 0.658], [0.684, 0.672, 0.662, 0.67, 0.644], [0.656, 0.654, 0.646, 0.618, 0.618], [0.644, 0.644, 0.622, 0.628, 0.598], [0.626, 0.632, 0.614, 0.62, 0.602]]]}, 'run_2': {'synflow': [[[0.732, 0.734, 0.738, 0.718, 0.696], [0.71, 0.716, 0.698, 0.704, 0.674], [0.654, 0.664, 0.65, 0.652, 0.624], [0.674, 0.67, 0.668, 0.662, 0.634], [0.654, 0.636, 0.638, 0.648, 0.616]]]}}
synflow_multishot = {'number_of_runs': 3, 'run_0': {'synflow': [{'level_1': [0.758, 0.734, 0.72, 0.736, 0.742, 0.714, 0.71, 0.6960000000000001, 0.7000000000000001, 0.72, 0.714, 0.71, 0.708, 0.716, 0.6920000000000001, 0.6900000000000001, 0.6920000000000001, 0.7020000000000001, 0.6900000000000001, 0.672, 0.676, 0.6920000000000001, 0.676, 0.684, 0.652], 'level_2': [0.746, 0.756, 0.75, 0.746, 0.746, 0.726, 0.732, 0.708, 0.71, 0.708, 0.68, 0.716, 0.706, 0.674, 0.6920000000000001, 0.7020000000000001, 0.674, 0.6960000000000001, 0.678, 0.68, 0.67, 0.674, 0.6880000000000001, 0.678, 0.666], 'level_3': [0.75, 0.742, 0.754, 0.746, 0.75, 0.718, 0.724, 0.732, 0.714, 0.706, 0.6960000000000001, 0.672, 0.714, 0.6880000000000001, 0.6940000000000001, 0.6900000000000001, 0.662, 0.6880000000000001, 0.68, 0.684, 0.66, 0.666, 0.652, 0.6920000000000001, 0.66]}]}, 'run_1': {'synflow': [{'level_1': [0.746, 0.734, 0.728, 0.732, 0.738, 0.712, 0.728, 0.714, 0.6980000000000001, 0.7000000000000001, 0.7020000000000001, 0.6920000000000001, 0.686, 0.664, 0.676, 0.672, 0.674, 0.652, 0.662, 0.668, 0.662, 0.668, 0.65, 0.634, 0.65], 'level_2': [0.744, 0.73, 0.732, 0.73, 0.728, 0.708, 0.7000000000000001, 0.714, 0.706, 0.712, 0.6900000000000001, 0.7020000000000001, 0.712, 0.704, 0.7000000000000001, 0.6880000000000001, 0.6920000000000001, 0.668, 0.664, 0.66, 0.666, 0.656, 0.664, 0.654, 0.646], 'level_3': [0.744, 0.73, 0.734, 0.736, 0.736, 0.7000000000000001, 0.718, 0.7000000000000001, 0.6920000000000001, 0.6960000000000001, 0.704, 0.708, 0.6880000000000001, 0.6960000000000001, 0.684, 0.68, 0.682, 0.656, 0.66, 0.658, 0.672, 0.666, 0.672, 0.674, 0.676]}]}, 'run_2': {'synflow': [{'level_1': [0.742, 0.744, 0.762, 0.746, 0.728, 0.6960000000000001, 0.706, 0.714, 0.718, 0.7020000000000001, 0.6980000000000001, 0.7000000000000001, 0.708, 0.68, 0.6880000000000001, 0.706, 0.686, 0.704, 0.674, 0.674, 0.676, 0.682, 0.662, 0.682, 0.668], 'level_2': [0.744, 0.76, 0.734, 0.724, 0.734, 0.708, 0.71, 0.722, 0.706, 0.706, 0.6980000000000001, 0.6980000000000001, 0.7000000000000001, 0.6960000000000001, 0.6900000000000001, 0.6880000000000001, 0.6920000000000001, 0.68, 0.674, 0.674, 0.664, 0.684, 0.684, 0.67, 0.666], 'level_3': [0.738, 0.744, 0.732, 0.738, 0.742, 0.714, 0.7020000000000001, 0.714, 0.716, 0.7020000000000001, 0.6960000000000001, 0.6920000000000001, 0.666, 0.7020000000000001, 0.6880000000000001, 0.668, 0.672, 0.672, 0.674, 0.664, 0.668, 0.67, 0.664, 0.678, 0.654]}]}}
UGS = {'number_of_runs': 3, 'adj_compressions': [0.2, 0.4, 0.6, 0.8, 1.0], 'weight_compressions': [0.2, 0.4, 0.6, 0.8, 1.0], 'run_0': {'ugs': [[[0.594, 0.558, 0.366, 0.342, 0.316], [0.546, 0.49, 0.358, 0.334, 0.318], [0.516, 0.46, 0.356, 0.318, 0.318], [0.51, 0.442, 0.356, 0.316, 0.316], [0.474, 0.414, 0.34, 0.316, 0.316]]]}, 'run_1': {'ugs': [[[0.65, 0.47, 0.312, 0.252, 0.208], [0.554, 0.386, 0.274, 0.196, 0.194], [0.524, 0.376, 0.25, 0.198, 0.18], [0.496, 0.378, 0.238, 0.202, 0.184], [0.502, 0.34, 0.24, 0.2, 0.182]]]}, 'run_2': {'ugs': [[[0.664, 0.446, 0.426, 0.29, 0.308], [0.622, 0.486, 0.352, 0.288, 0.302], [0.578, 0.426, 0.276, 0.282, 0.312], [0.59, 0.43, 0.414, 0.274, 0.306], [0.552, 0.418, 0.442, 0.274, 0.316]]]}}
random = {'number_of_runs': 3, 'adj_compressions': [0.2, 0.4, 0.6, 0.8, 1.0], 'weight_compressions': [0.2, 0.4, 0.6, 0.8, 1.0], 'run_0': {'random': [[[0.618, 0.664, 0.436, 0.282, 0.19], [0.552, 0.494, 0.34, 0.21, 0.16], [0.482, 0.436, 0.27, 0.28, 0.216], [0.54, 0.398, 0.36, 0.278, 0.252], [0.452, 0.456, 0.402, 0.268, 0.186]]]}, 'run_1': {'random': [[[0.66, 0.516, 0.346, 0.38, 0.206], [0.576, 0.554, 0.376, 0.292, 0.212], [0.488, 0.44, 0.336, 0.214, 0.306], [0.472, 0.436, 0.278, 0.254, 0.262], [0.452, 0.452, 0.322, 0.292, 0.258]]]}, 'run_2': {'random': [[[0.664, 0.578, 0.42, 0.268, 0.312], [0.584, 0.472, 0.204, 0.312, 0.226], [0.554, 0.46, 0.436, 0.32, 0.222], [0.464, 0.412, 0.316, 0.226, 0.316], [0.462, 0.418, 0.318, 0.302, 0.194]]]}}

Adj_ratios = [0.2, 0.4, 0.6, 0.8, 1.0]
for i in range(len(Adj_ratios)):
  top_k_singleshot_data = []
  top_k_multishot_data = []
  synflow_singleshot_data = []
  synflow_multishot_data = []
  ugs_data = []
  random_data = []
  
  for run in range(3):
    top_k_singleshot_data.append(top_k_singleshot['run_' + str(run)]['top_k_gradient_score'][0][i])
    top_k_multishot_data.append(top_k_multishot['run_' + str(run)]['top_k_gradient_score'][0]['level_3'][5*i:5*(i+1)])
    synflow_singleshot_data.append(synflow_singleshot['run_' + str(run)]['synflow'][0][i])
    synflow_multishot_data.append(synflow_multishot['run_' + str(run)]['synflow'][0]['level_3'][5*i:5*(i+1)])
    ugs_data.append(UGS['run_' + str(run)]['ugs'][0][i])
    random_data.append(random['run_' + str(run)]['random'][0][i])
  

  top_k_singleshot_mean, top_k_singleshot_min, top_k_singleshot_max = calculate(top_k_singleshot_data)
  top_k_multishot_mean, top_k_multishot_min, top_k_multishot_max = calculate(top_k_multishot_data)
  synflow_singleshot_mean, synflow_singleshot_min, synflow_singleshot_max = calculate(synflow_singleshot_data)
  synflow_multishot_mean, synflow_multishot_min, synflow_multishot_max = calculate(synflow_multishot_data)
  ugs_mean, ugs_min, ugs_max = calculate(ugs_data)
  random_mean, random_min, random_max = calculate(random_data)

  plt.rc('font', family='serif', size=12)
  plt.rc('xtick', labelsize='medium')
  plt.rc('ytick', labelsize='medium')

  fig = plt.figure(figsize=(6, 6))

  ax = fig.add_subplot(1, 1, 1)
  ax.plot(ratios, top_k_multishot_mean, color='purple', ls='solid', linewidth = 0.5, marker = "*", label = "IGRP (Multiple Shot)")
  ax.plot(ratios, top_k_singleshot_mean, color='magenta', ls='solid', linewidth = 0.5, marker = "x", label = "IGRP (Single Shot)")
  ax.plot(ratios, synflow_multishot_mean, color='blue', ls='solid', linewidth = 0.5, marker = "^", label = "SF (Multiple Shot)")
  ax.plot(ratios, synflow_singleshot_mean, color='orange', ls='solid', linewidth = 0.5, marker = "v", label = "SF (Single Shot)")
  

  ax.plot(ratios, ugs_mean, color='red', ls='solid', linewidth = 0.5, marker = "s", label = "UGS")
  #ax.fill_between(ratios, ugs_min, ugs_max, facecolor='lightcoral', alpha=0.2)

  ax.plot(ratios, random_mean, color='green', ls='solid', linewidth = 0.5, marker = "o", label = "Random")
  #ax.fill_between(ratios, random_min, random_max, facecolor='lightgreen', alpha=0.2)
  ax.set_facecolor("whitesmoke")
  plt.grid(color = 'gray', linestyle = 'solid', linewidth = 0.5)
  dataset = 'Cora'
  title = 'Adjacency Compression Ratio = '+str(Adj_ratios[i])+' ('+dataset+')'
  ax.set_title(title)
  ax.set_xlabel('Weight Compression Ratio')
  ax.set_ylabel('Top-1 Accuracy')
  ax.set_yticks((0, 0.2, 0.4, 0.6, 0.8, 1))
  ax.set_xticks((0.2, 0.4, 0.6, 0.8, 1))
  plt.legend(loc = 3, prop={'size':10.5})
  plt.savefig('figure'+'_'+str(Adj_ratios[i])+ '.png')
  plt.show()
